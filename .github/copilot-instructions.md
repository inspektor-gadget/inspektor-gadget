# Inspektor Gadget

Inspektor Gadget is an open source project that provides a set of eBPF-based tools (gadgets) to monitor or collect
information from a Kubernetes cluster or a Linux system.

## Project and code guidelines

### Tech Stack

- Golang
- C (eBPF)
- Makefile
- Docker

### Testing

- When writing unit tests in Golang, we use the [require](https://pkg.go.dev/github.com/stretchr/testify) package for
  assertions.

### Formatting

- Use `make lint` to check the formatting of the code.
- Use `make clang-format` to format the eBPF C code.

### Gadget Development

- Each gadget is located in the `gadgets/` directory.
    - Each gadget has its own subdirectory, e.g., `gadgets/trace_open`.
    - Each gadget usually contains:
        - `gadget.yaml`: Metadata for the gadget.
        - `program.bpf.c`: The eBPF program source code.
        - `test/`: A directory containing tests for the gadget with subdirectories for unit and integration tests.
        - `README.md`: A simple readme like:
          ```
          # trace_open
    
          The trace_open gadget emits events when files are opened.
    
          Check the full documentation on https://inspektor-gadget.io/docs/latest/gadgets/trace_open
           ```
        - `README.mdx`: The full documentation for the gadget. This file is written in MDX format and is used to generate
          the documentation website.
    - Ensure this gadget is included in `gadgets/Makefile`
    - Ensure you create symlinks in `docs/gadgets` to the `README.mdx` file of the gadget.

### Contributing

- When authoring PRs ensure:
    - Ensure commits in the PR are atomic and have meaningful messages, squash if necessary.
    - Title should be prefixed with the type area that it touches e.g. gadgets/trace_open, operators/ebpf, docs/, etc.
      Ideally the title should be 72 characters or less.
    - Use a `Fixes:` tag if the commit fixes a bug. This tag should include the first 12 characters of the commit hash
      introducing the bug. This can be generated by including an alias in the .gitconfig file:
      ```
      [alias]
        fixline = log -1 --abbrev=12 --format='Fixes: %h (\"%s\")'
      ```