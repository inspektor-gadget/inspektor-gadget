---
title: trace_bind
sidebar_position: 60
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# trace_bind

The trace_bind gadget is used to stream socket binding syscalls.

## Getting started

Running the gadget:

<Tabs groupId="env">
    <TabItem value="kubectl-gadget" label="kubectl gadget">
        ```bash
        $ kubectl gadget run ghcr.io/inspektor-gadget/gadget/trace_bind:latest [flags]
        ```
    </TabItem>

    <TabItem value="ig" label="ig">
        ```bash
        $ sudo ig run ghcr.io/inspektor-gadget/gadget/trace_bind:latest [flags]
        ```
    </TabItem>
</Tabs>
## Flags

### `--ignore_errors`

Show only events where the bind succeeded. By default all events are traced.

### `--pid`

Show only bind events generated by this particular PID. By default all events are traced.

## Guide

First, we need to run an application that generates some events.

<Tabs groupId="env">
    <TabItem value="kubectl-gadget" label="kubectl gadget">
        ```bash
        $ kubectl run --restart=Never --image=busybox mypod -- sh -c 'while /bin/true ; do nc -l -p 4242 -w 1 ; sleep 3 ; done'
        pod/mypod created
        ```
    </TabItem>

    <TabItem value="ig" label="ig">
        ```bash
        $ docker run --name test-trace-bind -d busybox /bin/sh -c 'while /bin/true ; do nc -l -p 4242 -w 1 ; sleep 3 ; done'
        ```
    </TabItem>
</Tabs>

Then, let's run the gadget:

<Tabs groupId="env">
    <TabItem value="kubectl-gadget" label="kubectl gadget">
        ```bash
        $ kubectl gadget run trace_bind:latest --podname mypod
        K8S.NAMESPACE            K8S.PODNAME              K8S.CONTAINERNAME        ADDR                       COMM                    PID           TID          UID          GID BOUND_… K8S.NODE     ERROR     TIMESTAMP
        default                  mypod                    mypod                    :::4242                    nc                   635160        635160            0            0 0       minikube-do…           2024-08-01T21:06:03.369118…
        default                  mypod                    mypod                    :::4242                    nc                   635213        635213            0            0 0       minikube-do…           2024-08-01T21:06:07.371444…
        default                  mypod                    mypod                    :::4242                    nc                   635233        635233            0            0 0       minikube-do…           2024-08-01T21:06:11.374078…
        default                  mypod                    mypod                    :::4242                    nc                   635301        635301            0            0 0       minikube-do…           2024-08-01T21:06:15.376660…
        ```

    </TabItem>

    <TabItem value="ig" label="ig">
        ```bash
        $ sudo ig run trace_bind:latest --containername test-trace-bind
        WARN[0000] Ignoring runtime "cri-o" with non-existent socketPath "/run/crio/crio.sock"
        RUNTIME.CONTAINERNAME               ADDR                                  COMM                            PID                TID                UID                GID BOUND_DEV_… ERROR         TIMESTAMP
        test-trace-bind                     :::4242                               nc                           647422             647422                  0                  0 0                         2024-08-01T23:20:01.907854101+02:00
        test-trace-bind                     :::4242                               nc                           647472             647472                  0                  0 0                         2024-08-01T23:20:05.910747532+02:00
        ^C
        ```
    </TabItem>
</Tabs>

These lines correspond to the socket binding operation initiated by `nc`.
We can stop the gadget by hitting Ctrl-C.

Finally, clean the system:

<Tabs groupId="env">
    <TabItem value="kubectl-gadget" label="kubectl gadget">
        ```bash
        $ kubectl delete pod mypod
        ```
    </TabItem>

    <TabItem value="ig" label="ig">
        ```bash
        $ docker rm -f test-trace-bind
        ```
    </TabItem>
</Tabs>
